--- cms/common/action/site/Entry/SearchAction.class.php ---
@@ -58,10 +58,11 @@ private function searchEntries(string $freewordText, array $label, array $cdate,
 			foreach(array("title","content","more") as $column){
 				$freeword = array();
 				foreach($keywords as $keyword){
+					$keyword = trim($keyword);
 
 					$bind_key = ':freeword'.$keywordCounts;
 
-					if($keyword[0] == "-"){
+					if(strlen($keyword) >= 1 && $keyword[0] == "-"){
 						$keyword = substr($keyword,1);
 						$freeword[] = 'Entry.'.$column." not like ".$bind_key."";
 					}else{

--- cms/common/action/site/Entry/UploadFileAction.class.php ---
@@ -163,8 +163,8 @@ function execute($resp, $form, $req) {
 					switch($ext){
 						case "jpeg":
 							exec("jpegoptim -V", $out);
-							if(isset($out) && count($out)){
-								exec("jpegoptim --strip-all " . $filepath);
+							if(is_array($out) && count($out)){
+								exec("jpegoptim --strip-all " . escapeshellarg($filepath));
 							}
 							break;
 					}

