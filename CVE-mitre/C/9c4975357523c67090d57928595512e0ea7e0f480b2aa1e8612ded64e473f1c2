--- src/gui.c ---
@@ -4478,13 +4478,15 @@ gui_do_scroll(void)
     /*
      * Don't call updateWindow() when nothing has changed (it will overwrite
      * the status line!).
+     *
+     * Check for ScreenLines, because in ex-mode, we don't have a valid display.
      */
-    if (old_topline != wp->w_topline
+    if (ScreenLines != NULL && (old_topline != wp->w_topline
 	    || wp->w_redr_type != 0
 #ifdef FEAT_DIFF
 	    || old_topfill != wp->w_topfill
 #endif
-	    )
+	    ))
     {
 	int type = UPD_VALID;
 

--- src/testdir/crash/ex_redraw_crash ---
@@ -0,0 +1 @@
+vdivvi|gIv|Ã·ï¿½Xï¿½ï¿½\ï¿½ï¿½,Xï¿½ï¿½Xï¿½ï¿½\ï¿½ï¿½#Xï¿½ï¿½\ï¿½ï¿½<ï¿½ï¿½\ï¿½ï¿½,Xï¿½ï¿½X

--- src/testdir/test_crash.vim ---
@@ -234,6 +234,12 @@ func Test_crash1_3()
   call term_sendkeys(buf, args)
   call TermWait(buf, 50)
 
+  let file = 'crash/ex_redraw_crash'
+  let cmn_args = "%s -u NONE -i NONE -n -m -X -Z -e -s -S %s -c ':qa!'"
+  let args = printf(cmn_args, vim, file)
+  call term_sendkeys(buf, args)
+  call TermWait(buf, 150)
+
   " clean up
   exe buf .. "bw!"
   bw!

--- src/version.c ---
@@ -704,6 +704,8 @@ static char *(features[]) =
 
 static int included_patches[] =
 {   /* Add new patch number below this line */
+/**/
+    1043,
 /**/
     1042,
 /**/

