--- lhc_web/modules/lhcannedmsg/showsuggester.php ---
@@ -1,5 +1,7 @@
 <?php
 
+header('Content-type: application/json');
+
 $tpl = erLhcoreClassTemplate::getInstance('lhcannedmsg/showsuggester.tpl.php');
 
 $chat = erLhcoreClassChat::getSession()->load( 'erLhcoreClassModelChat', $Params['user_parameters']['chat_id']);

--- lhc_web/modules/lhcannedmsg/subject.php ---
@@ -42,6 +42,7 @@
         }
 
         $db->commit();
+        header('Content-type: application/json');
         echo json_encode($response);
         exit;
     }

--- lhc_web/modules/lhchat/blockuser.php ---
@@ -85,10 +85,12 @@
     erLhcoreClassModelChatBlockedUser::blockChat($params);
     $tpl = erLhcoreClassTemplate::getInstance('lhkernel/alert_success.tpl.php');
     $tpl->set('msg', erTranslationClassLhTranslation::getInstance()->getTranslation('chat/blockedusers', 'Visitor was blocked!'));
+    header('Content-type: application/json');
     echo json_encode(array('error' => false, 'result' => $tpl->fetch()));
 } else {
     $tpl = erLhcoreClassTemplate::getInstance('lhkernel/validation_error.tpl.php');
     $tpl->set('errors', $Errors);
+    header('Content-type: application/json');
     echo json_encode(array('error' => true, 'result' => $tpl->fetch()));
 }
 

--- lhc_web/modules/lhchat/changestatus.php ---
@@ -13,6 +13,7 @@
         $changeStatus = (int) $_POST['ChatStatus'];
 
         if (!isset($_SERVER['HTTP_X_CSRFTOKEN']) || !$currentUser->validateCSFRToken($_SERVER['HTTP_X_CSRFTOKEN'])) {
+            header('Content-type: application/json');
             echo json_encode(array(
                 'error' => 'true',
                 'result' => erTranslationClassLhTranslation::getInstance()->getTranslation('chat/adminchat', 'Invalid CSRF token!')
@@ -37,13 +38,16 @@
             ));
             
             erLhcoreClassChatEventDispatcher::getInstance()->dispatch('chat.data_changed',array('chat' => & $chat, 'user' => $currentUser));
-            
+
+            header('Content-type: application/json');
             echo json_encode(array(
                 'error' => 'false',
                 'is_owner' => $chat->user_id == $userData->id
             ));
             exit();
         } else {
+
+            header('Content-type: application/json');
             echo json_encode(array(
                 'error' => 'true',
                 'result' => erTranslationClassLhTranslation::getInstance()->getTranslation('chat/adminchat', 'Invalid chat status')

--- lhc_web/modules/lhchat/checkchatstatus.php ---
@@ -1,5 +1,7 @@
 <?php
 
+header('Content-type: application/json');
+
 $activated = 'false';
 $result = 'false';
 $ott = '';

--- lhc_web/modules/lhchat/editprevious.php ---
@@ -1,4 +1,6 @@
-<?php 
+<?php
+
+header('Content-type: application/json');
 
 try {
     $chat = erLhcoreClassChat::getSession()->load( 'erLhcoreClassModelChat', $Params['user_parameters']['chat_id']);

--- lhc_web/modules/lhchat/getmessageadmin.php ---
@@ -1,5 +1,7 @@
 <?php
 
+header('Content-type: application/json');
+
 try {
 	$Chat = erLhcoreClassChat::getSession ()->load ( 'erLhcoreClassModelChat', $Params ['user_parameters'] ['chat_id'] );
 	

--- lhc_web/modules/lhchat/holdaction.php ---
@@ -1,5 +1,7 @@
 <?php
 
+header('Content-type: application/json');
+
 $db = ezcDbInstance::get();
 
 $db->beginTransaction();

--- lhc_web/modules/lhcobrowse/checkinitializer.php ---
@@ -1,4 +1,5 @@
-<?php 
+<?php
+header('Content-type: application/json');
 
 if (is_numeric($Params['user_parameters']['chat_id']))
 {

--- lhc_web/modules/lhcobrowse/checkmirrorchanges.php ---
@@ -1,5 +1,7 @@
 <?php
 
+header('Content-type: application/json');
+
 if (is_numeric($Params['user_parameters']['chat_id'])) {
     /*
      * If online user mode we have to make different check

--- lhc_web/modules/lhuser/setinactive.php ---
@@ -1,4 +1,5 @@
 <?php
+header('Content-type: application/json');
 
 $currentUser = erLhcoreClassUser::instance();
 $userData = $currentUser->getUserData(true);

--- lhc_web/modules/lhxml/accepttransfer.php ---
@@ -1,4 +1,7 @@
 <?php
+
+header('Content-type: application/json');
+
 $currentUser = erLhcoreClassUser::instance();
 if (!$currentUser->isLogged() && !$currentUser->authenticate($_POST['username'],$_POST['password']))
 {

--- lhc_web/modules/lhxml/accepttransferbychat.php ---
@@ -1,5 +1,7 @@
 <?php
 
+header('Content-type: application/json');
+
 $currentUser = erLhcoreClassUser::instance();
 if (!$currentUser->isLogged() && !$currentUser->authenticate($_POST['username'],$_POST['password']))
 {

--- lhc_web/modules/lhxml/chatdata.php ---
@@ -1,4 +1,7 @@
 <?php
+
+header('Content-type: application/json');
+
 $currentUser = erLhcoreClassUser::instance();
 if (!$currentUser->isLogged() && !$currentUser->authenticate($_POST['username'],$_POST['password']))
 {

--- lhc_web/modules/lhxml/chatssynchro.php ---
@@ -1,5 +1,7 @@
 <?php
 
+header('Content-type: application/json');
+
 $currentUser = erLhcoreClassUser::instance();
 if (!$currentUser->isLogged() && !$currentUser->authenticate($_POST['username'],$_POST['password']))
 {

--- lhc_web/modules/lhxml/checklogin.php ---
@@ -3,6 +3,8 @@
 // Debug
 //erLhcoreClassLog::write(print_r($_POST,true));
 
+header('Content-type: application/json');
+
 @ini_set('session.cookie_samesite', 'None');
 @ini_set('session.cookie_secure', true);
 

--- lhc_web/modules/lhxml/getuseronlinestatus.php ---
@@ -1,4 +1,6 @@
 <?php
+header('Content-type: application/json');
+
 $currentUser = erLhcoreClassUser::instance();
 if (!$currentUser->isLogged() && !$currentUser->authenticate($_POST['username'],$_POST['password']))
 {

--- lhc_web/modules/lhxml/transferchat.php ---
@@ -1,5 +1,7 @@
 <?php
 
+header('Content-type: application/json');
+
 $currentUser = erLhcoreClassUser::instance();
 if (!$currentUser->isLogged() && !$currentUser->authenticate($_POST['username'],$_POST['password']))
 {

--- lhc_web/modules/lhxml/userinfo.php ---
@@ -1,5 +1,7 @@
 <?php
 
+header('Content-type: application/json');
+
 $tpl = erLhcoreClassTemplate::getInstance( 'lhxml/userinfo.tpl.php' );
 
 try {

